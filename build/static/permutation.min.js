<<<<<<< Updated upstream
window.permutation=function(){return{global:window,keypress:keymage}}(),permutation.control=function(){function t(){return a.runEditor(u,e,r,o,i)}function e(t,e,n){return a.evaluate(t,e,n)}function n(){return a.clearEditor(u)}function r(t){return a.logInput(c,t)}function o(t){return a.logResult(c,t)}function i(t){return a.logError(c,t)}var a=permutation,u=a.makeEditor(a.makeTextbox("editor")),c=a.makeLogger(a.makeTextbox("logger"));return a.keypress("ctrl-alt-enter",function(){t()}),a.keypress("ctrl-alt-backspace",function(){n()}),a.keypress("ctrl-shift-backspace",function(){n()}),a.keypress("ctrl-shift-enter",function(){t(),n()}),a.init(),{editor:u,logger:c}},function(){function t(t){return t}function e(t,e,n,r,o){var i=t.getValue();n(i),e(i,r,o)}function n(t){t.setValue("")}permutation.makeEditor=t,permutation.runEditor=e,permutation.clearEditor=n}(),function(){function evaluate(input,succeed,fail){succeed=succeed||noop,fail=fail||thrower;try{succeed(eval(input))}catch(e){fail(e)}}function noop(){}function thrower(t){throw t}permutation.evaluate=evaluate}(),function(){function t(t,e){for(var n in e)e.hasOwnProperty(n)&&(n in t||(t[n]=e[n]))}permutation.extend=t}(),permutation.init=function(){function t(){var t=i();return vv(t)(a)(u)(s,n,r)(l)(c)(s,f),t}var e=permutation.extend,n=warped.deepMap,r=warped.run,o=wires.sampler,i=sig.val,a=sig.ensure,u=sig.update,c=sig.flatten,s=sig.map,f=wires.out,l=museq.seq;window.samples={c:o("/static/c.wav"),h:o("/static/h.wav"),k:o("/static/k.wav"),s:o("/static/s.wav"),t:o("/static/t.wav")},window.s1=t(),window.s2=t(),window.s3=t(),window.s4=t(),window.s5=t(),window.s6=t(),[sig,wires,museq,warped].forEach(function(t){e(window,t)})},function(){function t(t){return t.setReadOnly(!0),t.renderer.setShowGutter(!1),t}function e(t,e){var n=t.getValue();e=n.length?[n,e].join("\n"):e,t.setValue(e),t.clearSelection()}function n(t){return["/*",t,"*/"].join("\n")}function r(t,n){e(t,n)}function o(t){e(t,"")}function i(t,r){e(t,n(r.stack)+"\n")}permutation.makeLogger=t,permutation.logInput=r,permutation.logResult=o,permutation.logError=i}(),function(){function t(t){var e=ace.edit(t),n=e.getSession();return e.setShowPrintMargin(!1),e.setTheme("ace/theme/monokai"),n.setUseWorker(!1),n.setMode("ace/mode/javascript"),e}permutation.makeTextbox=t}();
=======
window.permutation=function(){return{global:window,keypress:keymage}}(),permutation.control=function(){function t(){return a.runEditor(u,e,r,i,o)}function e(t,e,n){return a.evaluate(t,e,n)}function n(){return a.clearEditor(u)}function r(t){return a.logInput(c,t)}function i(t){return a.logResult(c,t)}function o(t){return a.logError(c,t)}var a=permutation,u=a.makeEditor(a.makeTextbox("editor")),c=a.makeLogger(a.makeTextbox("logger"));return a.keypress("ctrl-alt-enter",function(){t()}),a.keypress("ctrl-alt-backspace",function(){n()}),a.keypress("ctrl-shift-backspace",function(){n()}),a.keypress("ctrl-shift-enter",function(){t(),n()}),a.init(),u.setValue(a.intro()),u.clearSelection(),t(),{editor:u,logger:c}},function(){function t(t){return t}function e(t,e,n,r,i){var o=t.getValue();n(o),e(o,r,i)}function n(t){t.setValue("")}permutation.makeEditor=t,permutation.runEditor=e,permutation.clearEditor=n}(),function(){function evaluate(input,succeed,fail){succeed=succeed||noop,fail=fail||thrower;try{succeed(eval(input))}catch(e){fail(e)}}function noop(){}function thrower(t){throw t}permutation.evaluate=evaluate}(),function(){function t(t,e){for(var n in e)e.hasOwnProperty(n)&&(n in t||(t[n]=e[n]))}permutation.extend=t}(),permutation.init=function(){function t(t){return l(t,r,i)}function e(){var t=a();return vv(t)(u)(c)(d)(s)(l,p),t}var n=permutation.extend,r=warped.deepMap,i=warped.run,o=wires.sampler,a=sig.val,u=sig.ensure,c=sig.update,s=sig.flatten,l=sig.map,f=sig.put,p=wires.out,d=museq.seq,w=museq.interval;window.result=t,window.samples={c:o("/static/c.wav"),h:o("/static/h.wav"),k:o("/static/k.wav"),s:o("/static/s.wav"),t:o("/static/t.wav")},window.s1=e(),window.s2=e(),window.s3=e(),window.s4=e(),window.s5=e(),window.s6=e(),[sig,wires,museq,warped].forEach(function(t){n(window,t)}),f(w,1200)},function(){function t(){var t=i(u)(),a=vv(null)(o,r(2,c.length))(n,function(){return i(c)()})(e)();return e([t,"  (sync)","  (loop)","  (result)",a,"  (to, s1)"]).join("\n")}function e(t){return t.reduce(function(t,e){return a(t,e)})}var n=warped.map,r=warped.randInt,i=warped.randVal,o=warped.repeat,a=warped.concat,u=[function(){return["vv('k ~ k s ~ ~, h*4')","  (motif, samples)"]},function(){return["vv('c, k, [t*3, t*2]*2')","  (motif, samples)"]}],c=[function(){return["  (every, "+2*r(1,4)+", function(beats) {","    return vv(beats)","      (slice, -(beats.length / 2))","      (repeat, randInt(1, 2) * 2)","      (concatValues)","      ()","  })"]},function(){return["  (every, "+2*r(1,4)+", function(beats) {","    var i = -randInt(1, 2) * 2","    return concat(slice(beats, 0, i), vv(beats)","      (slice, i)","      (repeat, randInt(1, 2) * 2)","      (concatValues)","      ())","  })"]},function(){var t=-i([.2,.6,1.2,2,2.3,2.5]),e=r(2,3);return["  (every, "+e+", deepMap, ctl, {pitch: "+t+"})"]},function(){var t=i([.3,.5,1.5,3.3]),e=r(2,6);return["  (every, "+e+", deepMap, ctl, {pitch: "+t+"})"]}];permutation.intro=t}(),function(){function t(t){return t.setReadOnly(!0),t.renderer.setShowGutter(!1),t}function e(t,e){var n=t.getValue();e=n.length?[n,e].join("\n"):e,t.setValue(e),t.clearSelection()}function n(t,n){e(t,r(n)+"\n")}function r(t){return["/*",t,"*/"].join("\n")}function i(t,n){e(t,n)}function o(t,e){n(t,e)}function a(t,e){n(t,e.stack)}permutation.makeLogger=t,permutation.logInput=i,permutation.logResult=o,permutation.logError=a}(),function(){function t(t){var e=ace.edit(t),n=e.getSession();return e.setShowPrintMargin(!1),e.setTheme("ace/theme/monokai"),n.setUseWorker(!1),n.setMode("ace/mode/javascript"),e}permutation.makeTextbox=t}();
>>>>>>> Stashed changes
